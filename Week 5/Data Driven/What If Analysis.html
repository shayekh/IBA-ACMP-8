<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Scenario Planner</title>
    
    <!-- Chart.js from a CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* --- General Styling & Layout --- */
        :root {
            --primary-color: #005A9C;
            --secondary-color: #F2F2F2;
            --text-color: #333;
            --accent-green: #28a745;
            --accent-red: #dc3545;
            --border-color: #dee2e6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-color);
            margin: 0;
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }
        
        /* --- Navigation --- */
        .navigation {
            display: flex;
            gap: 1rem;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 2rem;
        }
        .nav-button {
            padding: 0.75rem 1.5rem;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #6c757d;
            border-bottom: 3px solid transparent;
            transition: color 0.2s, border-color 0.2s;
        }
        .nav-button:hover {
            color: var(--primary-color);
        }
        .nav-button.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        /* --- Page Containers --- */
        .page {
            display: none; /* Hidden by default */
        }
        .page.active {
            display: block; /* Shown when active */
        }

        header {
            text-align: center;
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
        }

        header h1 {
            color: var(--primary-color);
            margin: 0;
        }

        header p {
            margin: 0.5rem 0 0;
            color: #6c757d;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 2rem;
        }

        /* --- Controls & Results Styling (from original) --- */
        .controls { display: flex; flex-direction: column; gap: 2rem; }
        .control-group label { display: block; font-weight: 600; margin-bottom: 0.75rem; }
        .control-group .value-display { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); }
        input[type="range"] { width: 100%; cursor: pointer; accent-color: var(--primary-color); }
        .results { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; text-align: center; margin-bottom: 2rem; }
        .result-card { background-color: var(--secondary-color); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color); }
        .result-card h3 { margin: 0 0 0.5rem; font-size: 1rem; color: #6c757d; font-weight: 500; }
        .result-card .value { font-size: 1.75rem; font-weight: 700; }
        #profit-value { transition: color 0.3s ease; }
        .profit-positive { color: var(--accent-green); }
        .profit-negative { color: var(--accent-red); }
        .chart-container { position: relative; height: 350px; }

        /* --- "How It Works" Page Styling --- */
        #page-explanation { line-height: 1.7; }
        #page-explanation h2 { color: var(--primary-color); border-bottom: 2px solid var(--secondary-color); padding-bottom: 0.5rem; margin-top: 2rem; }
        #page-explanation p { margin-bottom: 1rem; }
        #page-explanation code {
            background-color: #e9ecef;
            padding: 0.2em 0.4em;
            margin: 0;
            font-size: 90%;
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
        }
        #page-explanation .formula-block {
            background-color: var(--secondary-color);
            border-left: 4px solid var(--primary-color);
            padding: 1rem 1.5rem;
            margin: 1rem 0;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
            font-size: 1.1rem;
            white-space: pre-wrap;
        }

        /* --- Responsive Design --- */
        @media (max-width: 900px) {
            .main-content { grid-template-columns: 1fr; }
            .results { grid-template-columns: 1fr; }
        }
        @media (max-width: 600px) {
            body { padding: 1rem; }
            .container { padding: 1.5rem; }
            .results { grid-template-columns: 1fr; }
            .navigation { gap: 0; }
            .nav-button { padding: 0.75rem; flex-grow: 1; text-align: center; }
        }
    </style>
</head>
<body>

    <main class="container">
        <nav class="navigation">
            <button id="nav-planner" class="nav-button active">Scenario Planner</button>
            <button id="nav-explanation" class="nav-button">How It Works</button>
        </nav>

        <!-- PAGE 1: The Planner Tool -->
        <div id="page-planner" class="page active">
            <header>
                <h1>Business Scenario Planner</h1>
                <p>A "What-If" tool to visualize the impact of pricing and marketing decisions. Adjust the sliders to see real-time projections.</p>
            </header>
            <div class="main-content">
                <div class="left-panel">
                    <section class="controls">
                        <div class="control-group">
                            <label for="price">Price per Unit: <span id="price-value" class="value-display">৳50</span></label>
                            <input type="range" id="price" min="5" max="100" value="50" step="1">
                        </div>
                        <div class="control-group">
                            <label for="marketing">Marketing Spend: <span id="marketing-value" class="value-display">৳20,000</span></label>
                            <input type="range" id="marketing" min="1000" max="100000" value="20000" step="1000">
                        </div>
                    </section>
                    <hr style="margin: 2rem 0; border: 0; border-top: 1px solid var(--border-color);">
                    <section class="results">
                        <div class="result-card"><h3>Estimated Sales</h3><p id="units-sold-value" class="value">0</p></div>
                        <div class="result-card"><h3>Total Revenue</h3><p id="revenue-value" class="value">৳0</p></div>
                        <div class="result-card"><h3>Estimated Profit</h3><p id="profit-value" class="value">৳0</p></div>
                    </section>
                </div>
                <div class="right-panel">
                    <div class="chart-container"><canvas id="scenarioChart"></canvas></div>
                </div>
            </div>
        </div>

        <!-- PAGE 2: The Explanation -->
        <div id="page-explanation" class="page">
            <header>
                <h1>Behind the Scenes: How It Works</h1>
                <p>This tool uses a simplified business model to estimate outcomes. Here are the core assumptions and formulas driving the calculations.</p>
            </header>
            
            <h2>1. Core Inputs</h2>
            <p>You control two main variables with the sliders:</p>
            <ul>
                <li><strong>Price per Unit:</strong> The sale price for a single product.</li>
                <li><strong>Marketing Spend:</strong> The total budget allocated to marketing efforts.</li>
            </ul>

            <h2>2. The "Secret Sauce": Estimated Units Sold</h2>
            <p>This is the most critical calculation. It models how customer demand changes based on your decisions. We assume that demand is inversely affected by price (higher price = fewer sales) and positively boosted by marketing (more spend = more sales), but with diminishing returns.</p>
            <p>The formula used is:</p>
            <div class="formula-block">Units Sold = Base Demand <br> - (Price × Price Sensitivity) <br> + (log(Marketing Spend) × Marketing Effectiveness)</div>
            <p>Here's what each part means:</p>
            <ul>
                <li><code>Base Demand (7000)</code>: A starting number of units we would sell in a neutral market.</li>
                <li><code>Price Sensitivity (80)</code>: A multiplier for how much sales drop for every dollar the price increases. A higher value means customers are more sensitive to price.</li>
                <li><code>Marketing Effectiveness (1500)</code>: A multiplier for the impact of marketing. Using a logarithm (<code>log()</code>) models <strong>diminishing returns</strong>—the first ৳10,000 in marketing has a much bigger impact than the jump from ৳90,000 to ৳100,000.</li>
            </ul>

            <h2>3. Financial Calculations</h2>
            <p>Once we estimate the units sold, the rest of the calculations are straightforward accounting.</p>
            
            <p><strong>Cost of Goods Sold (COGS):</strong> We assume a fixed cost to produce each unit.</p>
            <ul><li><strong>Cost per Unit:</strong> <code>৳10</code> (a constant in the code)</li></ul>
            <div class="formula-block">Total COGS = Units Sold × Cost per Unit</div>

            <p><strong>Total Revenue:</strong> The total income from sales.</p>
            <div class="formula-block">Total Revenue = Units Sold × Price per Unit</div>

            <p><strong>Estimated Profit:</strong> The final bottom line after all costs are subtracted from revenue.</p>
            <div class="formula-block">Estimated Profit = Total Revenue - Total COGS - Marketing Spend</div>
            
        </div>
    </main>

    <script>
        // --- Page Navigation Logic ---
        const navPlanner = document.getElementById('nav-planner');
        const navExplanation = document.getElementById('nav-explanation');
        const pagePlanner = document.getElementById('page-planner');
        const pageExplanation = document.getElementById('page-explanation');
        
        function showPage(pageToShow, buttonToActivate) {
            // Hide all pages
            pagePlanner.classList.remove('active');
            pageExplanation.classList.remove('active');
            
            // Deactivate all nav buttons
            navPlanner.classList.remove('active');
            navExplanation.classList.remove('active');

            // Show the target page and activate the button
            pageToShow.classList.add('active');
            buttonToActivate.classList.add('active');
        }

        navPlanner.addEventListener('click', () => showPage(pagePlanner, navPlanner));
        navExplanation.addEventListener('click', () => showPage(pageExplanation, navExplanation));

        // --- Planner Logic (from original) ---
        const priceSlider = document.getElementById('price');
        const marketingSlider = document.getElementById('marketing');
        const priceValueDisplay = document.getElementById('price-value');
        const marketingValueDisplay = document.getElementById('marketing-value');
        const unitsSoldOutput = document.getElementById('units-sold-value');
        const revenueOutput = document.getElementById('revenue-value');
        const profitOutput = document.getElementById('profit-value');

        const COST_PER_UNIT = 10;

        const ctx = document.getElementById('scenarioChart').getContext('2d');
        const scenarioChart = new Chart(ctx, {
            type: 'bar',
            data: { labels: ['Total Revenue', 'Estimated Profit'], datasets: [{ label: 'Financial Outcome', data: [0, 0], backgroundColor: ['rgba(54, 162, 235, 0.6)', 'rgba(75, 192, 192, 0.6)'], borderColor: ['rgba(54, 162, 235, 1)', 'rgba(75, 192, 192, 1)'], borderWidth: 1 }] },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { y: { beginAtZero: true, ticks: { callback: value => '৳' + value.toLocaleString() } } },
                plugins: { legend: { display: false }, tooltip: { callbacks: { label: context => '৳' + context.parsed.y.toLocaleString() } } }
            }
        });

        function calculateScenario() {
            const price = parseFloat(priceSlider.value);
            const marketingSpend = parseFloat(marketingSlider.value);
            const baseDemand = 7000, priceSensitivity = 80, marketingEffectiveness = 1500;
            let unitsSold = baseDemand - (price * priceSensitivity) + (Math.log(marketingSpend) * marketingEffectiveness);
            unitsSold = Math.max(0, Math.round(unitsSold));
            const totalRevenue = price * unitsSold;
            const costOfGoodsSold = unitsSold * COST_PER_UNIT;
            const estimatedProfit = totalRevenue - (costOfGoodsSold + marketingSpend);
            updateUI(price, marketingSpend, unitsSold, totalRevenue, estimatedProfit);
        }

        function updateUI(price, marketing, units, revenue, profit) {
            const formatCurrency = (value) => '৳' + Math.round(value).toLocaleString();
            priceValueDisplay.textContent = formatCurrency(price);
            marketingValueDisplay.textContent = formatCurrency(marketing);
            unitsSoldOutput.textContent = units.toLocaleString();
            revenueOutput.textContent = formatCurrency(revenue);
            profitOutput.textContent = formatCurrency(profit);
            profitOutput.classList.toggle('profit-positive', profit >= 0);
            profitOutput.classList.toggle('profit-negative', profit < 0);
            scenarioChart.data.datasets[0].data[0] = revenue;
            scenarioChart.data.datasets[0].data[1] = profit;
            const profitBarColor = profit >= 0 ? 'rgba(75, 192, 192, 0.6)' : 'rgba(255, 99, 132, 0.6)';
            const profitBorderColor = profit >= 0 ? 'rgba(75, 192, 192, 1)' : 'rgba(255, 99, 132, 1)';
            scenarioChart.data.datasets[0].backgroundColor[1] = profitBarColor;
            scenarioChart.data.datasets[0].borderColor[1] = profitBorderColor;
            scenarioChart.update();
        }

        priceSlider.addEventListener('input', calculateScenario);
        marketingSlider.addEventListener('input', calculateScenario);
        document.addEventListener('DOMContentLoaded', calculateScenario);
    </script>
</body>
</html>